<!-- for controlling one of these cameras from an HTML docker in OBS, add it as a custom HTML docker
    configure your creds and camera's IP address in the top of the script tag

  camera_tilt_up: curl -k "http://admin:wormy@192.168.0.223/pantiltcontrol.cgi?PanSingleMoveDegree=5&TiltSingleMoveDegree=5&PanTiltSingleMove=1" UP
  camera_tilt_down: curl -k "http://admin:wormy@192.168.0.223/pantiltcontrol.cgi?PanSingleMoveDegree=5&TiltSingleMoveDegree=5&PanTiltSingleMove=7" DOWN
  camera_tilt_left: curl -k "http://admin:wormy@192.168.0.223/pantiltcontrol.cgi?PanSingleMoveDegree=5&TiltSingleMoveDegree=5&PanTiltSingleMove=3" LEFT
  camera_tilt_right: curl -k "http://admin:wormy@192.168.0.223/pantiltcontrol.cgi?PanSingleMoveDegree=5&TiltSingleMoveDegree=5&PanTiltSingleMove=5" RIGHT
  camera_tilt_home: curl -k "http://admin:wormy@192.168.0.223/pantiltcontrol.cgi?PanSingleMoveDegree=5&TiltSingleMoveDegree=5&PanTiltSingleMove=4" CENTER

-->

<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Responsive Grid</title>
<style>
    body, html {
        margin: 0;
        padding: 0;
        height: 100%;
    }

    .grid-container {
        display: grid;
        grid-template-columns: repeat(3, 1fr);
        grid-template-rows: repeat(3, 1fr);
        height: 100vh;
    }

    .grid-item {
        border: 1px solid black;
        cursor: grab;
    }
</style>
<script>
    username = "admin"
    password = ""
    address = "192.168.0.20"

    // const http = new XMLHttpRequest();
    // let wheaders = new Headers();
    // wheaders.set('Authorization', 'Basic ' + btoa(username + ":" + password));
    // window.btoa(username + ':' + password);
    // var headers = new Headers({
    //     // 'Authorization': `Basic ${btoa(username)}`
    //     'Authorization': `Basic ${btoa(username + ':' + password)}`
    // });

    function makeAuthenticatedRequest(url, username, password) {
        // Create a new XMLHttpRequest object
        const xhr = new XMLHttpRequest();

        // Prepare the request
        xhr.open('GET', url, true);

        // Set the Authorization header for basic authentication
        xhr.setRequestHeader('Authorization', 'Basic ' + btoa(username + ':' + password));

          // Set withCredentials to true to ignore CORS
        xhr.withCredentials = true;

        // Set up event handlers for response
        xhr.onload = function() {
            if (xhr.status >= 200 && xhr.status < 300) {
            // Request was successful
            console.log(xhr.responseText);
            } else {
            // Request failed
            console.error('Request failed with status:', xhr.status);
            }
        };

        // Handle network errors
        xhr.onerror = function() {
            console.error('Network error occurred');
        };

        // Send the request
        xhr.send();
    }



    
    function up(){
        // window.btoa(username + ':' + password);
        // fetch(`http://${address}/pantiltcontrol.cgi?PanSingleMoveDegree=5&TiltSingleMoveDegree=5&PanTiltSingleMove=1`, {method:'GET', headers: {
        //     'Authorization': 'Basic ' + btoa(username + ':' + password)
        // }, mode: 'no-cors'})
        // fetch(`http://${address}/pantiltcontrol.cgi?PanSingleMoveDegree=5&TiltSingleMoveDegree=5&PanTiltSingleMove=1`, {mode: "no-cors"})
        // console.log(wheaders)
        // fetch("http://admin:wormy@192.168.0.20/pantiltcontrol.cgi?PanSingleMoveDegree=5&TiltSingleMoveDegree=5&PanTiltSingleMove=1")
        makeAuthenticatedRequest(`http://${address}/pantiltcontrol.cgi?PanSingleMoveDegree=5&TiltSingleMoveDegree=5&PanTiltSingleMove=1`, username, password)
    }

    function center(){
        // fetch(`http://${address}/pantiltcontrol.cgi?PanSingleMoveDegree=5&TiltSingleMoveDegree=5&PanTiltSingleMove=4`, {method:'GET', headers: {'Content-Type': 'application/json', 'Authorization': 'Basic ' + btoa(`${username}:`)}, mode: 'no-cors'})

    }
    
</script>
</head>
<body>
    <div class="grid-container">
        <div class="grid-item">1</div>
        <div class="grid-item" onclick="up()">2</div>
        <div class="grid-item">3</div>
        <div class="grid-item" onclick="left">4</div>
        <div class="grid-item" onclick="center()">5</div>
        <div class="grid-item" onclick="right">6</div>
        <div class="grid-item">7</div>
        <div class="grid-item" onclick="down">8</div>
        <div class="grid-item">9</div>
    </div>
</body>
</html>
